<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <progress id="progressBar" value="0" max="100"></progress>
    <img src="https://ts3.cn.mm.bing.net/th?id=OIP-C.7wlJ_w0I_qj8VWG2KumLPwHaFj&w=288&h=216&c=8&rs=1&qlt=90&o=6&dpr=1.7&pid=3.1&rm=2" alt="">
    <img src="https://ts3.cn.mm.bing.net/th?id=OIP-C.7wlJ_w0I_qj8VWG2KumLPwHaFj&w=288&h=216&c=8&rs=1&qlt=90&o=6&dpr=1.7&pid=3.1&rm=2" alt="">
    <img src="https://ts3.cn.mm.bing.net/th?id=OIP-C.7wlJ_w0I_qj8VWG2KumLPwHaFj&w=288&h=216&c=8&rs=1&qlt=90&o=6&dpr=1.7&pid=3.1&rm=2" alt="">
</body>
<script>
    const progressBar = document.getElementById('progressBar');
    const resources = window.performance.getEntriesByType('resource');
    const totalResources = resources.length;
    let loadedResources = 0;
        console.log('resources',resources);
    resources.forEach((resource) => {

        if (resource.initiatorType !==
            'xmlhttprequest') {// 排除 AJAX 请求
            resource.onload = () => {
                loadedResources++;
                const progress = Math.round((loadedResources / totalResources) * 100);
                updateProgress(progress);
            };
        }
    });
    function updateProgress(progress) {// 更新进度条
        console.log('progress',progress);

        progressBar.value = progress
    }

</script>

</html>